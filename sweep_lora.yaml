program: tools/train_medmnist_peft.py
method: grid

metric:
  name: val_acc
  goal: maximize

parameters:
  adapter:
    value: lora

  dataset:
    values:
      - "PneumoniaMNIST"
      - "DermaMNIST (MedMNIST)"
      - "BloodMNIST (MedMNIST)"
      - "OrganMNIST"
      - "RetinaMNIST"

  lora_r:
    values: [4, 8, 16, 32, 64]

  lora_placement:
    values:
      - "Q"
      - "K"
      - "V"
      - "P"
      - "F1"
      - "Q,K"
      - "Q,V"
      - "F1,F2"
      - "Q,K,V"
      - "P,F1,F2"
      - "Q,K,V,P"
      - "Q,K,V,P,F1,F2"

  seed:
    values: [42, 7, 2023]

  npz_dir:
    value: "./medmnist_npz"

  input_size:
    value: 224

  epochs:
    value: 30

  batch_size:
    value: 128

  lr:
    value: 1e-4

  weight_decay:
    value: 1e-4

  dino_size:
    value: "s"

  repo_dir:
    value: "./dinov3"

  dino_ckpt:
    value: "/absolute/path/to/dinov3_vits16_pretrain_lvd1689m-08c60483.pth"
